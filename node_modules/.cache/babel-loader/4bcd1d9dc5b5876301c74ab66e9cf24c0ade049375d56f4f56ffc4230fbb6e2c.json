{"ast":null,"code":"import _toConsumableArray from\"G:/internetM/my-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"G:/internetM/my-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from\"react\";import Header from\"../MainLanding/pages/Header\";import\"./css/products.css\";import Renge from\"./components/Reng\";import Footer from\"../MainLanding/pages/Footer\";import ProductItem from\"./components/ProductItem\";import{useContext}from\"react\";import{CustomContext}from\"../utils/Context\";import Sort from\"./components/Sort\";import{useParams}from\"react-router-dom\";import{useCallback}from\"react\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function ProdListSerch(){var _useParams=useParams(),inquiry=_useParams.inquiry;var _useContext=useContext(CustomContext),search=_useContext.search;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),searchResults=_useState2[0],setSearchResults=_useState2[1];var _useState3=useState([0,500000]),_useState4=_slicedToArray(_useState3,2),values=_useState4[0],setValues=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),sortBy=_useState6[0],setSortBy=_useState6[1];useEffect(function(){var parsedSearch=JSON.parse(localStorage.getItem(\"search\"));setSearchResults(parsedSearch);},[search]);useEffect(function(){var filteredByValues=searchResults.filter(function(item){var parsCost=parseFloat(item.cost.replace(/[ ,]/g,\"\"));var cost=Number(parsCost);return cost>=values[0]&&cost<=values[1];});var sortedProducts=_toConsumableArray(filteredByValues);if(sortBy===\"priceAscending\"){sortedProducts.sort(function(a,b){var costA=parseFloat(a.cost.replace(/[ ,]/g,\"\"));var costB=parseFloat(b.cost.replace(/[ ,]/g,\"\"));return costA-costB;});}else if(sortBy===\"priceDescending\"){sortedProducts.sort(function(a,b){var costA=parseFloat(a.cost.replace(/[ ,]/g,\"\"));var costB=parseFloat(b.cost.replace(/[ ,]/g,\"\"));return costB-costA;});}else if(sortBy===\"stock\"){sortedProducts.sort(function(a,b){if(a.discount===\"\"&&b.discount!==\"\"){return 1;}else if(a.discount!==\"\"&&b.discount===\"\"){return-1;}});}setSearchResults(sortedProducts);},[values,sortBy]);var handleSort=useCallback(function(sortType){setSortBy(sortType);},[]);return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"products-list\",children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"container products_pad\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"products__sort\",children:[/*#__PURE__*/_jsx(Renge,{values:values,setValues:setValues}),/*#__PURE__*/_jsx(Sort,{handleSort:handleSort})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"products__catalog\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"products__sorting\",children:/*#__PURE__*/_jsx(\"button\",{className:\"products__sorting-btn\",children:\"\\u041E\\u0442\\u0441\\u043E\\u0440\\u0442\\u0438\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"products__catalog-title\",children:/*#__PURE__*/_jsxs(\"h2\",{children:[\"\\u0412\\u0441\\u0435 \\u043F\\u043E\\u0434\\u0445\\u043E\\u0434\\u044F\\u0449\\u0438\\u0435 \\u0442\\u043E\\u0432\\u0430\\u0440\\u044B \\u043F\\u043E \\u0432\\u0430\\u0448\\u0435\\u043C\\u0443 \\u0437\\u0430\\u043F\\u0440\\u043E\\u0441\\u0443 \\\"\",/*#__PURE__*/_jsx(\"span\",{className:\"catalog-title-bold\",children:inquiry}),\"\\\"\"]})}),/*#__PURE__*/_jsx(\"ul\",{className:\"products\",children:searchResults.map(function(product){return/*#__PURE__*/_jsx(ProductItem,{product:product},product.id);})})]})]}),/*#__PURE__*/_jsx(Footer,{})]})});}export default ProdListSerch;","map":{"version":3,"names":["React","useEffect","useState","Header","Renge","Footer","ProductItem","useContext","CustomContext","Sort","useParams","useCallback","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","ProdListSerch","_useParams","inquiry","_useContext","search","_useState","_useState2","_slicedToArray","searchResults","setSearchResults","_useState3","_useState4","values","setValues","_useState5","_useState6","sortBy","setSortBy","parsedSearch","JSON","parse","localStorage","getItem","filteredByValues","filter","item","parsCost","parseFloat","cost","replace","Number","sortedProducts","_toConsumableArray","sort","a","b","costA","costB","discount","handleSort","sortType","children","className","map","product","id"],"sources":["G:/internetM/my-app/src/AllProducts/ProdListSerch.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport Header from \"../MainLanding/pages/Header\";\r\nimport \"./css/products.css\";\r\nimport Renge from \"./components/Reng\";\r\nimport Footer from \"../MainLanding/pages/Footer\";\r\nimport ProductItem from \"./components/ProductItem\";\r\nimport { useContext } from \"react\";\r\nimport { CustomContext } from \"../utils/Context\";\r\nimport Sort from \"./components/Sort\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport { useCallback } from \"react\";\r\n\r\nfunction ProdListSerch() {\r\n  const { inquiry } = useParams();\r\n  const { search } = useContext(CustomContext);\r\n  const [searchResults, setSearchResults] = useState([]);\r\n  const [values, setValues] = useState([0, 500000]);\r\n  const [sortBy, setSortBy] = useState(null);\r\n\r\n  useEffect(() => {\r\n    const parsedSearch = JSON.parse(localStorage.getItem(\"search\"));\r\n    setSearchResults(parsedSearch);\r\n  }, [search]);\r\n\r\n  useEffect(() => {\r\n    const filteredByValues = searchResults.filter((item) => {\r\n      const parsCost = parseFloat(item.cost.replace(/[ ,]/g, \"\"));\r\n      const cost = Number(parsCost);\r\n      return cost >= values[0] && cost <= values[1];\r\n    });\r\n    let sortedProducts = [...filteredByValues];\r\n\r\n    if (sortBy === \"priceAscending\") {\r\n      sortedProducts.sort((a, b) => {\r\n        const costA = parseFloat(a.cost.replace(/[ ,]/g, \"\"));\r\n        const costB = parseFloat(b.cost.replace(/[ ,]/g, \"\"));\r\n        return costA - costB;\r\n      });\r\n    } else if (sortBy === \"priceDescending\") {\r\n      sortedProducts.sort((a, b) => {\r\n        const costA = parseFloat(a.cost.replace(/[ ,]/g, \"\"));\r\n        const costB = parseFloat(b.cost.replace(/[ ,]/g, \"\"));\r\n        return costB - costA;\r\n      });\r\n    } else if (sortBy === \"stock\") {\r\n      sortedProducts.sort((a, b) => {\r\n        if (a.discount === \"\" && b.discount !== \"\") {\r\n          return 1;\r\n        } else if (a.discount !== \"\" && b.discount === \"\") {\r\n          return -1;\r\n        }\r\n      });\r\n    }\r\n    setSearchResults(sortedProducts);\r\n  }, [values, sortBy]);\r\n  const handleSort = useCallback((sortType) => {\r\n    setSortBy(sortType);\r\n  }, []);\r\n  return (\r\n    <>\r\n      <div className=\"products-list\">\r\n        <Header />\r\n        <div className=\"container products_pad\">\r\n          <div className=\"products__sort\">\r\n            <Renge values={values} setValues={setValues} />\r\n            <Sort handleSort={handleSort} />\r\n          </div>\r\n          <div className=\"products__catalog\">\r\n            <div className=\"products__sorting\">\r\n              <button className=\"products__sorting-btn\">Отсортировать</button>\r\n            </div>\r\n            <div className=\"products__catalog-title\">\r\n              <h2>\r\n                Все подходящие товары по вашему запросу \"\r\n                <span className=\"catalog-title-bold\">{inquiry}</span>\"\r\n              </h2>\r\n            </div>\r\n            <ul className=\"products\">\r\n              {searchResults.map((product) => (\r\n                <ProductItem key={product.id} product={product} />\r\n              ))}\r\n            </ul>\r\n          </div>\r\n        </div>\r\n        <Footer />\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default ProdListSerch;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}