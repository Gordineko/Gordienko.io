{"ast":null,"code":"import _objectSpread from\"G:/Domistore/Dom1store.io/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useContext}from\"react\";import\"../style/register.css\";import{Formik,Form,Field,ErrorMessage}from\"formik\";import*as Yup from\"yup\";import remove from\"../../MainLanding/image/icone/remove.png\";import{Link,useNavigate}from\"react-router-dom\";import axios from\"axios\";import{CustomContext}from\"../../utils/Context\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var SigninSchema=Yup.object().shape({name:Yup.string().required(\"Поле должно быть заполнено\"),surname:Yup.string().required(\"Поле должно быть заполнено\"),phoneNamber:Yup.string().matches(/^\\+380\\d{9}$/,\"+380...\").required(\"Поле должно быть заполнено\"),email:Yup.string().email(\"Invalid email\").required(\"Поле должно быть заполнено\"),password:Yup.string().min(6,\"Короткий пароль!\").required(\"Поле должно быть заполнено\")});function Register(_ref){var handleClick=_ref.handleClick,RegActive=_ref.RegActive;var _useContext=useContext(CustomContext),user=_useContext.user,setUser=_useContext.setUser;var navigate=useNavigate();function registerUser(values){var User=values;console.log(values);axios.post(\"http://localhost:3330/register\",User).then(function(_ref2){var data=_ref2.data;setUser(_objectSpread({token:data.accessToken},data.user));localStorage.setItem(\"user\",JSON.stringify(_objectSpread({token:data.accessToken},data.user)));handleClick();}).catch(function(err){return console.log(err.message);});}return/*#__PURE__*/_jsx(\"div\",{className:RegActive?\"register-active\":\"register\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"register__form\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"register__form-prew\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Registration\"}),/*#__PURE__*/_jsx(\"img\",{onClick:handleClick,src:remove,alt:\"404\"})]}),/*#__PURE__*/_jsx(Formik,{initialValues:{name:\"\",surname:\"\",phoneNamber:\"\",email:\"\",password:\"\"},validationSchema:SigninSchema,onSubmit:function onSubmit(values){registerUser(values);},children:function children(_ref3){var errors=_ref3.errors,touched=_ref3.touched;return/*#__PURE__*/_jsx(Form,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"register__form-content\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"register__name-label\",htmlFor:\"name\",children:\"\\u0418\\u043C\\u044F\"}),/*#__PURE__*/_jsx(Field,{className:\"register__input name\",name:\"name\",id:\"name\"}),errors.name&&touched.name?/*#__PURE__*/_jsx(\"div\",{className:\"register__name-msg msg\",children:errors.name}):null,/*#__PURE__*/_jsx(\"label\",{className:\"register__surname-label\",htmlFor:\"surname\",children:\"\\u0424\\u0430\\u043C\\u0438\\u043B\\u0438\\u044F\"}),/*#__PURE__*/_jsx(Field,{className:\"register__input surname\",name:\"surname\",id:\"surname\"}),errors.surname&&touched.surname?/*#__PURE__*/_jsx(\"div\",{className:\"register__surname-msg msg\",children:errors.surname}):null,/*#__PURE__*/_jsx(\"label\",{className:\"register__phoneNamber-label\",htmlFor:\"phoneNamber\",children:\"\\u041D\\u043E\\u043C\\u0435\\u0440 \\u0442\\u0435\\u043B\\u0435\\u0444\\u043E\\u043D\\u0430\"}),/*#__PURE__*/_jsx(Field,{className:\"register__input phoneNamber\",name:\"phoneNamber\",id:\"phoneNamber\"}),errors.phoneNamber&&touched.phoneNamber?/*#__PURE__*/_jsx(\"div\",{className:\"register__phoneNamber-msg msg\",children:errors.phoneNamber}):null,/*#__PURE__*/_jsx(\"label\",{className:\"register__email-label\",htmlFor:\"email\",children:\"\\u042D\\u043B. \\u043F\\u043E\\u0447\\u0442\\u0430\"}),/*#__PURE__*/_jsx(Field,{className:\"register__input email\",name:\"email\",id:\"email\",type:\"email\"}),errors.email&&touched.email?/*#__PURE__*/_jsx(\"div\",{className:\"register__email-msg msg\",children:errors.email}):null,/*#__PURE__*/_jsx(\"label\",{className:\"register__password-label\",htmlFor:\"password\",children:\"\\u041F\\u0440\\u0438\\u0434\\u0443\\u043C\\u0430\\u0439\\u0442\\u0435 \\u043F\\u0430\\u0440\\u043E\\u043B\\u044C\"}),/*#__PURE__*/_jsx(Field,{className:\"register__input password\",name:\"password\",id:\"password\"}),errors.password&&touched.password?/*#__PURE__*/_jsx(\"div\",{className:\"register__password-msg msg\",children:errors.password}):null,/*#__PURE__*/_jsx(\"button\",{className:\"register__button\",type:\"submit\",children:\"\\u0417\\u0430\\u0440\\u0435\\u0433\\u0435\\u0441\\u0442\\u0440\\u0438\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C\\u0441\\u044F\"})]})});}})]})});}export default Register;","map":{"version":3,"names":["React","useContext","Formik","Form","Field","ErrorMessage","Yup","remove","Link","useNavigate","axios","CustomContext","jsx","_jsx","jsxs","_jsxs","SigninSchema","object","shape","name","string","required","surname","phoneNamber","matches","email","password","min","Register","_ref","handleClick","RegActive","_useContext","user","setUser","navigate","registerUser","values","User","console","log","post","then","_ref2","data","_objectSpread","token","accessToken","localStorage","setItem","JSON","stringify","catch","err","message","className","children","onClick","src","alt","initialValues","validationSchema","onSubmit","_ref3","errors","touched","htmlFor","id","type"],"sources":["G:/Domistore/Dom1store.io/src/Authoriz/page/Register.js"],"sourcesContent":["import React, { useContext } from \"react\";\r\nimport \"../style/register.css\";\r\nimport { Formik, Form, Field, ErrorMessage } from \"formik\";\r\nimport * as Yup from \"yup\";\r\nimport remove from \"../../MainLanding/image/icone/remove.png\";\r\nimport { Link, useNavigate } from \"react-router-dom\";\r\nimport axios from \"axios\";\r\nimport { CustomContext } from \"../../utils/Context\";\r\n\r\nconst SigninSchema = Yup.object().shape({\r\n  name: Yup.string().required(\"Поле должно быть заполнено\"),\r\n  surname: Yup.string().required(\"Поле должно быть заполнено\"),\r\n  phoneNamber: Yup.string()\r\n    .matches(/^\\+380\\d{9}$/, \"+380...\")\r\n    .required(\"Поле должно быть заполнено\"),\r\n  email: Yup.string()\r\n    .email(\"Invalid email\")\r\n    .required(\"Поле должно быть заполнено\"),\r\n  password: Yup.string()\r\n    .min(6, \"Короткий пароль!\")\r\n    .required(\"Поле должно быть заполнено\"),\r\n});\r\n\r\nfunction Register({ handleClick, RegActive }) {\r\n  const { user, setUser } = useContext(CustomContext);\r\n\r\n  const navigate = useNavigate();\r\n\r\n  function registerUser(values) {\r\n    let User = values;\r\n    console.log(values);\r\n\r\n    axios\r\n      .post(\"http://localhost:3330/register\", User)\r\n      .then(({ data }) => {\r\n        setUser({\r\n          token: data.accessToken,\r\n          ...data.user,\r\n        });\r\n\r\n        localStorage.setItem(\r\n          \"user\",\r\n          JSON.stringify({\r\n            token: data.accessToken,\r\n            ...data.user,\r\n          })\r\n        );\r\n        handleClick();\r\n      })\r\n      .catch((err) => console.log(err.message));\r\n  }\r\n\r\n  return (\r\n    <div className={RegActive ? \"register-active\" : \"register\"}>\r\n      <div className=\"register__form\">\r\n        <div className=\"register__form-prew\">\r\n          <h1>Registration</h1>\r\n          <img onClick={handleClick} src={remove} alt=\"404\" />\r\n        </div>\r\n        <Formik\r\n          initialValues={{\r\n            name: \"\",\r\n            surname: \"\",\r\n            phoneNamber: \"\",\r\n            email: \"\",\r\n            password: \"\",\r\n          }}\r\n          validationSchema={SigninSchema}\r\n          onSubmit={(values) => {\r\n            registerUser(values);\r\n          }}\r\n        >\r\n          {({ errors, touched }) => (\r\n            <Form>\r\n              <div className=\"register__form-content\">\r\n                <label className=\"register__name-label\" htmlFor=\"name\">\r\n                  Имя\r\n                </label>\r\n                <Field className=\"register__input name\" name=\"name\" id=\"name\" />\r\n                {errors.name && touched.name ? (\r\n                  <div className=\"register__name-msg msg\">{errors.name}</div>\r\n                ) : null}\r\n                <label className=\"register__surname-label\" htmlFor=\"surname\">\r\n                  Фамилия\r\n                </label>\r\n                <Field\r\n                  className=\"register__input surname\"\r\n                  name=\"surname\"\r\n                  id=\"surname\"\r\n                />\r\n                {errors.surname && touched.surname ? (\r\n                  <div className=\"register__surname-msg msg\">\r\n                    {errors.surname}\r\n                  </div>\r\n                ) : null}\r\n                <label\r\n                  className=\"register__phoneNamber-label\"\r\n                  htmlFor=\"phoneNamber\"\r\n                >\r\n                  Номер телефона\r\n                </label>\r\n                <Field\r\n                  className=\"register__input phoneNamber\"\r\n                  name=\"phoneNamber\"\r\n                  id=\"phoneNamber\"\r\n                />\r\n                {errors.phoneNamber && touched.phoneNamber ? (\r\n                  <div className=\"register__phoneNamber-msg msg\">\r\n                    {errors.phoneNamber}\r\n                  </div>\r\n                ) : null}\r\n                <label className=\"register__email-label\" htmlFor=\"email\">\r\n                  Эл. почта\r\n                </label>\r\n                <Field\r\n                  className=\"register__input email\"\r\n                  name=\"email\"\r\n                  id=\"email\"\r\n                  type=\"email\"\r\n                />\r\n                {errors.email && touched.email ? (\r\n                  <div className=\"register__email-msg msg\">{errors.email}</div>\r\n                ) : null}\r\n                <label className=\"register__password-label\" htmlFor=\"password\">\r\n                  Придумайте пароль\r\n                </label>\r\n                <Field\r\n                  className=\"register__input password\"\r\n                  name=\"password\"\r\n                  id=\"password\"\r\n                />\r\n                {errors.password && touched.password ? (\r\n                  <div className=\"register__password-msg msg\">\r\n                    {errors.password}\r\n                  </div>\r\n                ) : null}\r\n                <button className=\"register__button\" type=\"submit\">\r\n                  Зарегестрироваться\r\n                </button>\r\n              </div>\r\n            </Form>\r\n          )}\r\n        </Formik>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Register;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}