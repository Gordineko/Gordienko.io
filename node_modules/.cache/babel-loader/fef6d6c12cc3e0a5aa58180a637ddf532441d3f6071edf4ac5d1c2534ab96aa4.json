{"ast":null,"code":"import _objectSpread from\"G:/internetM/my-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _toConsumableArray from\"G:/internetM/my-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"G:/internetM/my-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from\"react\";import stat from\"../../MainLanding/image/icone/statistic.png\";import blackLike from\"../../MainLanding/image/icone/black-heart.png\";import purpLike from\"../../MainLanding/image/icone/purp-heart.png\";import{useNavigate}from\"react-router-dom\";import{useContext}from\"react\";import{CustomContext}from\"../../utils/Context\";import axios from\"axios\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function ProductItem(props){var _useContext=useContext(CustomContext),favored=_useContext.favored,setFavored=_useContext.setFavored,basket=_useContext.basket,setBasket=_useContext.setBasket;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isFavored=_useState2[0],setisFavored=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),focus=_useState4[0],setFocus=_useState4[1];var product=props.product;var navigate=useNavigate();var costs=parseFloat(product.cost.replace(/[ ,]/g,\"\"));var buyin=Math.round(costs-costs*product.discount);var percent=product.discount*100;useEffect(function(){var foundItem=favored.find(function(item){return item.id===product.id;});setisFavored(foundItem!==undefined);},[favored,product]);var handleButtonHover=function handleButtonHover(buttonIndex){setFocus(buttonIndex);};function handleClick(catigory,name){navigate(\"/\".concat(catigory,\"/\").concat(name));}function likeProduct(product,buttonIndex,e){e.stopPropagation();setisFavored(buttonIndex);if(typeof product===\"object\"&&product!==null){var isAlreadyLiked=favored.some(function(favProduct){return favProduct.id===product.id;});if(!isAlreadyLiked){setFavored([].concat(_toConsumableArray(favored),[product]));localStorage.setItem(\"likes\",JSON.stringify([].concat(_toConsumableArray(favored),[product])));}}}function BuyProduct(product,buttonIndex,e){e.stopPropagation();if(typeof product===\"object\"&&product!==null){var existingProductIndex=basket.findIndex(function(basketProduct){return basketProduct.id===product.id;});if(existingProductIndex!==-1){var updatedBasket=_toConsumableArray(basket);updatedBasket[existingProductIndex].count+=1;setBasket(updatedBasket);localStorage.setItem(\"baskets\",JSON.stringify(updatedBasket));}else{var newProduct=_objectSpread(_objectSpread({},product),{},{count:1});setBasket([].concat(_toConsumableArray(basket),[newProduct]));localStorage.setItem(\"baskets\",JSON.stringify([].concat(_toConsumableArray(basket),[newProduct])));}}}return/*#__PURE__*/_jsxs(\"div\",{className:\"prod\",onClick:function onClick(){return handleClick(product.catigory,product.name);},onMouseEnter:function onMouseEnter(e){handleButtonHover(product.id);},onMouseLeave:function onMouseLeave(e){setFocus(!focus);},children:[/*#__PURE__*/_jsx(\"div\",{className:\"product__conteiner_img\",children:/*#__PURE__*/_jsx(\"img\",{src:focus===product.id?product.img2:product.img,alt:\"404\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"product__content\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"product__titles\",children:/*#__PURE__*/_jsx(\"span\",{children:product.name})}),/*#__PURE__*/_jsxs(\"div\",{className:\"product__costs\",children:[/*#__PURE__*/_jsx(\"p\",{className:product.discount===\"\"?\"product__cost without-discount\":\"product__cost with-discount\",children:product.cost+\" ₴\"}),/*#__PURE__*/_jsx(\"p\",{className:\"product__discount\",children:product.discount===\"\"?\"\":buyin+\" ₴\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"product_item_do\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"product__btn\",onClick:function onClick(e){if(BuyProduct(product,product.id,e)===false){e.preventDefault();}},children:\"\\u0412 \\u043A\\u043E\\u0440\\u0437\\u0438\\u043D\\u0443\"}),/*#__PURE__*/_jsx(\"img\",{src:stat,alt:\"404\"}),/*#__PURE__*/_jsx(\"img\",{src:isFavored?purpLike:blackLike,alt:\"404\",onClick:function onClick(e){if(likeProduct(product,product.id,e)===false){e.preventDefault();}}})]})]}),/*#__PURE__*/_jsx(\"div\",{className:percent===0||focus===product.id?\"prod__description\":\"prod__description hover\",children:/*#__PURE__*/_jsx(\"span\",{children:percent+\"%\"})})]});}export default ProductItem;","map":{"version":3,"names":["React","useEffect","useState","stat","blackLike","purpLike","useNavigate","useContext","CustomContext","axios","jsx","_jsx","jsxs","_jsxs","ProductItem","props","_useContext","favored","setFavored","basket","setBasket","_useState","_useState2","_slicedToArray","isFavored","setisFavored","_useState3","_useState4","focus","setFocus","product","navigate","costs","parseFloat","cost","replace","buyin","Math","round","discount","percent","foundItem","find","item","id","undefined","handleButtonHover","buttonIndex","handleClick","catigory","name","concat","likeProduct","e","stopPropagation","isAlreadyLiked","some","favProduct","_toConsumableArray","localStorage","setItem","JSON","stringify","BuyProduct","existingProductIndex","findIndex","basketProduct","updatedBasket","count","newProduct","_objectSpread","className","onClick","onMouseEnter","onMouseLeave","children","src","img2","img","alt","preventDefault"],"sources":["G:/internetM/my-app/src/AllProducts/components/ProductItem.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport stat from \"../../MainLanding/image/icone/statistic.png\";\r\nimport blackLike from \"../../MainLanding/image/icone/black-heart.png\";\r\nimport purpLike from \"../../MainLanding/image/icone/purp-heart.png\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { useContext } from \"react\";\r\nimport { CustomContext } from \"../../utils/Context\";\r\nimport axios from \"axios\";\r\n\r\nfunction ProductItem(props) {\r\n  const { favored, setFavored, basket, setBasket } = useContext(CustomContext);\r\n  const [isFavored, setisFavored] = useState(false);\r\n  const [focus, setFocus] = useState();\r\n\r\n  const { product } = props;\r\n\r\n  const navigate = useNavigate();\r\n\r\n  const costs = parseFloat(product.cost.replace(/[ ,]/g, \"\"));\r\n  const buyin = Math.round(costs - costs * product.discount);\r\n  const percent = product.discount * 100;\r\n\r\n  useEffect(() => {\r\n    const foundItem = favored.find((item) => item.id === product.id);\r\n    setisFavored(foundItem !== undefined);\r\n  }, [favored, product]);\r\n\r\n  const handleButtonHover = (buttonIndex) => {\r\n    setFocus(buttonIndex);\r\n  };\r\n\r\n  function handleClick(catigory, name) {\r\n    navigate(`/${catigory}/${name}`);\r\n  }\r\n\r\n  function likeProduct(product, buttonIndex, e) {\r\n    e.stopPropagation();\r\n    setisFavored(buttonIndex);\r\n    if (typeof product === \"object\" && product !== null) {\r\n      const isAlreadyLiked = favored.some(\r\n        (favProduct) => favProduct.id === product.id\r\n      );\r\n\r\n      if (!isAlreadyLiked) {\r\n        setFavored([...favored, product]);\r\n        localStorage.setItem(\"likes\", JSON.stringify([...favored, product]));\r\n      }\r\n    }\r\n  }\r\n  function BuyProduct(product, buttonIndex, e) {\r\n    e.stopPropagation();\r\n\r\n    if (typeof product === \"object\" && product !== null) {\r\n      const existingProductIndex = basket.findIndex(\r\n        (basketProduct) => basketProduct.id === product.id\r\n      );\r\n\r\n      if (existingProductIndex !== -1) {\r\n        const updatedBasket = [...basket];\r\n        updatedBasket[existingProductIndex].count += 1;\r\n        setBasket(updatedBasket);\r\n        localStorage.setItem(\"baskets\", JSON.stringify(updatedBasket));\r\n      } else {\r\n        const newProduct = { ...product, count: 1 };\r\n        setBasket([...basket, newProduct]);\r\n        localStorage.setItem(\r\n          \"baskets\",\r\n          JSON.stringify([...basket, newProduct])\r\n        );\r\n      }\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div\r\n      className=\"prod\"\r\n      onClick={() => handleClick(product.catigory, product.name)}\r\n      onMouseEnter={(e) => {\r\n        handleButtonHover(product.id);\r\n      }}\r\n      onMouseLeave={(e) => {\r\n        setFocus(!focus);\r\n      }}\r\n    >\r\n      <div className=\"product__conteiner_img\">\r\n        <img\r\n          src={focus === product.id ? product.img2 : product.img}\r\n          alt=\"404\"\r\n        />\r\n      </div>\r\n      <div className=\"product__content\">\r\n        <div className=\"product__titles\">\r\n          <span>{product.name}</span>\r\n        </div>\r\n        <div className=\"product__costs\">\r\n          <p\r\n            className={\r\n              product.discount === \"\"\r\n                ? \"product__cost without-discount\"\r\n                : \"product__cost with-discount\"\r\n            }\r\n          >\r\n            {product.cost + \" ₴\"}\r\n          </p>\r\n          <p className=\"product__discount\">\r\n            {product.discount === \"\" ? \"\" : buyin + \" ₴\"}\r\n          </p>\r\n        </div>\r\n        <div className=\"product_item_do\">\r\n          <button\r\n            className=\"product__btn\"\r\n            onClick={(e) => {\r\n              if (BuyProduct(product, product.id, e) === false) {\r\n                e.preventDefault();\r\n              }\r\n            }}\r\n          >\r\n            В корзину\r\n          </button>\r\n          <img src={stat} alt=\"404\" />\r\n          <img\r\n            src={isFavored ? purpLike : blackLike}\r\n            alt=\"404\"\r\n            onClick={(e) => {\r\n              if (likeProduct(product, product.id, e) === false) {\r\n                e.preventDefault();\r\n              }\r\n            }}\r\n          />\r\n        </div>\r\n      </div>\r\n      <div\r\n        className={\r\n          percent === 0 || focus === product.id\r\n            ? \"prod__description\"\r\n            : \"prod__description hover\"\r\n        }\r\n      >\r\n        <span>{percent + \"%\"}</span>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ProductItem;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}