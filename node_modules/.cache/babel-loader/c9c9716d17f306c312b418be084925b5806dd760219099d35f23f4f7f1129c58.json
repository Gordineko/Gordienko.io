{"ast":null,"code":"import _toConsumableArray from\"G:/internetM/my-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _regeneratorRuntime from\"G:/internetM/my-app/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"G:/internetM/my-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"G:/internetM/my-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState,useCallback}from\"react\";import{useParams}from\"react-router-dom\";import Header from\"../MainLanding/pages/Header\";import\"./css/products.css\";import Renge from\"./components/Reng\";import Footer from\"../MainLanding/pages/Footer\";import ProductItem from\"./components/ProductItem\";import Sort from\"./components/Sort\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function Prod(){var _useParams=useParams(),type=_useParams.type;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),products=_useState2[0],setProducts=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),filteredProduct=_useState4[0],setFilteredProduct=_useState4[1];var _useState5=useState([0,500000]),_useState6=_slicedToArray(_useState5,2),values=_useState6[0],setValues=_useState6[1];var _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),sortBy=_useState8[0],setSortBy=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),activeSort=_useState10[0],setActiveSort=_useState10[1];useEffect(function(){var fetchData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response,jsonData;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return fetch(\"http://localhost:3000/product\");case 3:response=_context.sent;_context.next=6;return response.json();case 6:jsonData=_context.sent;setProducts(jsonData);_context.next=13;break;case 10:_context.prev=10;_context.t0=_context[\"catch\"](0);console.error(\"error fetch product data\",_context.t0.message);case 13:case\"end\":return _context.stop();}},_callee,null,[[0,10]]);}));return function fetchData(){return _ref.apply(this,arguments);};}();fetchData();},[]);useEffect(function(){var filteredByCategory=products.filter(function(item){return item.catigory===type;});var filteredByValues=filteredByCategory.filter(function(item){var parsCost=parseFloat(item.cost.replace(/[ ,]/g,\"\"));var cost=Number(parsCost);return cost>=values[0]&&cost<=values[1];});var sortedProducts=_toConsumableArray(filteredByValues);if(sortBy===\"priceAscending\"){sortedProducts.sort(function(a,b){var costA=parseFloat(a.cost.replace(/[ ,]/g,\"\"));var costB=parseFloat(b.cost.replace(/[ ,]/g,\"\"));return costA-costB;});}else if(sortBy===\"priceDescending\"){sortedProducts.sort(function(a,b){var costA=parseFloat(a.cost.replace(/[ ,]/g,\"\"));var costB=parseFloat(b.cost.replace(/[ ,]/g,\"\"));return costB-costA;});}else if(sortBy===\"stock\"){sortedProducts.sort(function(a,b){if(a.discount===\"\"&&b.discount!==\"\"){return 1;}else if(a.discount!==\"\"&&b.discount===\"\"){return-1;}});}setFilteredProduct(sortedProducts);},[products,type,values,sortBy]);var handleSort=useCallback(function(sortType){setSortBy(sortType);},[]);var SortOpen=function SortOpen(){setActiveSort(!activeSort);};return/*#__PURE__*/_jsxs(_Fragment,{children:[activeSort&&/*#__PURE__*/_jsx(\"div\",{className:\"overlay\",onClick:SortOpen}),/*#__PURE__*/_jsxs(\"div\",{className:\"products-list\",children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"container products_pad\",children:[/*#__PURE__*/_jsxs(\"div\",{className:activeSort?\"active-sort \":\"products__sort\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"products_pad-prew\",children:[/*#__PURE__*/_jsx(\"h1\",{children:type}),/*#__PURE__*/_jsx(\"button\",{className:activeSort?\"products_pad-prew_btn\":\"products_pad-prew_btn close \",onClick:SortOpen,children:\"x\"})]}),/*#__PURE__*/_jsx(Renge,{values:values,setValues:setValues}),/*#__PURE__*/_jsx(Sort,{handleSort:handleSort})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"products__catalog\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"products__sorting\",children:/*#__PURE__*/_jsx(\"button\",{className:\"products__sorting-btn\",onClick:SortOpen,children:\"\\u041E\\u0442\\u0441\\u043E\\u0440\\u0442\\u0438\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C\"})}),/*#__PURE__*/_jsx(\"ul\",{className:\"products\",children:filteredProduct.map(function(product){return/*#__PURE__*/_jsx(ProductItem,{product:product},product.id);})})]})]}),/*#__PURE__*/_jsx(Footer,{})]})]});}export default Prod;","map":{"version":3,"names":["React","useEffect","useState","useCallback","useParams","Header","Renge","Footer","ProductItem","Sort","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Prod","_useParams","type","_useState","_useState2","_slicedToArray","products","setProducts","_useState3","_useState4","filteredProduct","setFilteredProduct","_useState5","_useState6","values","setValues","_useState7","_useState8","sortBy","setSortBy","_useState9","_useState10","activeSort","setActiveSort","fetchData","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","response","jsonData","wrap","_callee$","_context","prev","next","fetch","sent","json","t0","console","error","message","stop","apply","arguments","filteredByCategory","filter","item","catigory","filteredByValues","parsCost","parseFloat","cost","replace","Number","sortedProducts","_toConsumableArray","sort","a","b","costA","costB","discount","handleSort","sortType","SortOpen","children","className","onClick","map","product","id"],"sources":["G:/internetM/my-app/src/AllProducts/ProdList.js"],"sourcesContent":["import React, { useEffect, useState, useCallback } from \"react\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport Header from \"../MainLanding/pages/Header\";\r\nimport \"./css/products.css\";\r\nimport Renge from \"./components/Reng\";\r\nimport Footer from \"../MainLanding/pages/Footer\";\r\nimport ProductItem from \"./components/ProductItem\";\r\nimport Sort from \"./components/Sort\";\r\n\r\nfunction Prod() {\r\n  const { type } = useParams();\r\n  const [products, setProducts] = useState([]);\r\n  const [filteredProduct, setFilteredProduct] = useState([]);\r\n  const [values, setValues] = useState([0, 500000]);\r\n  const [sortBy, setSortBy] = useState(null);\r\n  const [activeSort, setActiveSort] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const fetchData = async () => {\r\n      try {\r\n        const response = await fetch(\"http://localhost:3000/product\");\r\n        const jsonData = await response.json();\r\n        setProducts(jsonData);\r\n      } catch (error) {\r\n        console.error(\"error fetch product data\", error.message);\r\n      }\r\n    };\r\n    fetchData();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const filteredByCategory = products.filter(\r\n      (item) => item.catigory === type\r\n    );\r\n\r\n    const filteredByValues = filteredByCategory.filter((item) => {\r\n      const parsCost = parseFloat(item.cost.replace(/[ ,]/g, \"\"));\r\n      const cost = Number(parsCost);\r\n      return cost >= values[0] && cost <= values[1];\r\n    });\r\n\r\n    let sortedProducts = [...filteredByValues];\r\n\r\n    if (sortBy === \"priceAscending\") {\r\n      sortedProducts.sort((a, b) => {\r\n        const costA = parseFloat(a.cost.replace(/[ ,]/g, \"\"));\r\n        const costB = parseFloat(b.cost.replace(/[ ,]/g, \"\"));\r\n        return costA - costB;\r\n      });\r\n    } else if (sortBy === \"priceDescending\") {\r\n      sortedProducts.sort((a, b) => {\r\n        const costA = parseFloat(a.cost.replace(/[ ,]/g, \"\"));\r\n        const costB = parseFloat(b.cost.replace(/[ ,]/g, \"\"));\r\n        return costB - costA;\r\n      });\r\n    } else if (sortBy === \"stock\") {\r\n      sortedProducts.sort((a, b) => {\r\n        if (a.discount === \"\" && b.discount !== \"\") {\r\n          return 1;\r\n        } else if (a.discount !== \"\" && b.discount === \"\") {\r\n          return -1;\r\n        }\r\n      });\r\n    }\r\n\r\n    setFilteredProduct(sortedProducts);\r\n  }, [products, type, values, sortBy]);\r\n\r\n  const handleSort = useCallback((sortType) => {\r\n    setSortBy(sortType);\r\n  }, []);\r\n  const SortOpen = () => {\r\n    setActiveSort(!activeSort);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      {activeSort && <div className=\"overlay\" onClick={SortOpen}></div>}\r\n      <div className=\"products-list\">\r\n        <Header />\r\n        <div className=\"container products_pad\">\r\n          <div className={activeSort ? \"active-sort \" : \"products__sort\"}>\r\n            <div className=\"products_pad-prew\">\r\n              <h1>{type}</h1>\r\n              <button\r\n                className={\r\n                  activeSort\r\n                    ? \"products_pad-prew_btn\"\r\n                    : \"products_pad-prew_btn close \"\r\n                }\r\n                onClick={SortOpen}\r\n              >\r\n                x\r\n              </button>\r\n            </div>\r\n\r\n            <Renge values={values} setValues={setValues} />\r\n            <Sort handleSort={handleSort} />\r\n          </div>\r\n          <div className=\"products__catalog\">\r\n            <div className=\"products__sorting\">\r\n              <button className=\"products__sorting-btn\" onClick={SortOpen}>\r\n                Отсортировать\r\n              </button>\r\n            </div>\r\n            <ul className=\"products\">\r\n              {filteredProduct.map((product) => (\r\n                <ProductItem key={product.id} product={product} />\r\n              ))}\r\n            </ul>\r\n          </div>\r\n        </div>\r\n        <Footer />\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default Prod;\r\n"],"mappings":"4bAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,CAAEC,QAAQ,CAAEC,WAAW,KAAQ,OAAO,CAC/D,OAASC,SAAS,KAAQ,kBAAkB,CAC5C,MAAO,CAAAC,MAAM,KAAM,6BAA6B,CAChD,MAAO,oBAAoB,CAC3B,MAAO,CAAAC,KAAK,KAAM,mBAAmB,CACrC,MAAO,CAAAC,MAAM,KAAM,6BAA6B,CAChD,MAAO,CAAAC,WAAW,KAAM,0BAA0B,CAClD,MAAO,CAAAC,IAAI,KAAM,mBAAmB,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,gCAAAC,QAAA,IAAAC,SAAA,yBAErC,QAAS,CAAAC,IAAIA,CAAA,CAAG,CACd,IAAAC,UAAA,CAAiBb,SAAS,CAAC,CAAC,CAApBc,IAAI,CAAAD,UAAA,CAAJC,IAAI,CACZ,IAAAC,SAAA,CAAgCjB,QAAQ,CAAC,EAAE,CAAC,CAAAkB,UAAA,CAAAC,cAAA,CAAAF,SAAA,IAArCG,QAAQ,CAAAF,UAAA,IAAEG,WAAW,CAAAH,UAAA,IAC5B,IAAAI,UAAA,CAA8CtB,QAAQ,CAAC,EAAE,CAAC,CAAAuB,UAAA,CAAAJ,cAAA,CAAAG,UAAA,IAAnDE,eAAe,CAAAD,UAAA,IAAEE,kBAAkB,CAAAF,UAAA,IAC1C,IAAAG,UAAA,CAA4B1B,QAAQ,CAAC,CAAC,CAAC,CAAE,MAAM,CAAC,CAAC,CAAA2B,UAAA,CAAAR,cAAA,CAAAO,UAAA,IAA1CE,MAAM,CAAAD,UAAA,IAAEE,SAAS,CAAAF,UAAA,IACxB,IAAAG,UAAA,CAA4B9B,QAAQ,CAAC,IAAI,CAAC,CAAA+B,UAAA,CAAAZ,cAAA,CAAAW,UAAA,IAAnCE,MAAM,CAAAD,UAAA,IAAEE,SAAS,CAAAF,UAAA,IACxB,IAAAG,UAAA,CAAoClC,QAAQ,CAAC,KAAK,CAAC,CAAAmC,WAAA,CAAAhB,cAAA,CAAAe,UAAA,IAA5CE,UAAU,CAAAD,WAAA,IAAEE,aAAa,CAAAF,WAAA,IAEhCpC,SAAS,CAAC,UAAM,CACd,GAAM,CAAAuC,SAAS,6BAAAC,IAAA,CAAAC,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAAG,SAAAC,QAAA,MAAAC,QAAA,CAAAC,QAAA,QAAAJ,mBAAA,GAAAK,IAAA,UAAAC,SAAAC,QAAA,iBAAAA,QAAA,CAAAC,IAAA,CAAAD,QAAA,CAAAE,IAAA,SAAAF,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA,SAES,CAAAC,KAAK,CAAC,+BAA+B,CAAC,QAAvDP,QAAQ,CAAAI,QAAA,CAAAI,IAAA,CAAAJ,QAAA,CAAAE,IAAA,SACS,CAAAN,QAAQ,CAACS,IAAI,CAAC,CAAC,QAAhCR,QAAQ,CAAAG,QAAA,CAAAI,IAAA,CACd/B,WAAW,CAACwB,QAAQ,CAAC,CAACG,QAAA,CAAAE,IAAA,kBAAAF,QAAA,CAAAC,IAAA,IAAAD,QAAA,CAAAM,EAAA,CAAAN,QAAA,aAEtBO,OAAO,CAACC,KAAK,CAAC,0BAA0B,CAAER,QAAA,CAAAM,EAAA,CAAMG,OAAO,CAAC,CAAC,yBAAAT,QAAA,CAAAU,IAAA,MAAAf,OAAA,iBAE5D,kBARK,CAAAL,SAASA,CAAA,SAAAC,IAAA,CAAAoB,KAAA,MAAAC,SAAA,OAQd,CACDtB,SAAS,CAAC,CAAC,CACb,CAAC,CAAE,EAAE,CAAC,CAENvC,SAAS,CAAC,UAAM,CACd,GAAM,CAAA8D,kBAAkB,CAAGzC,QAAQ,CAAC0C,MAAM,CACxC,SAACC,IAAI,QAAK,CAAAA,IAAI,CAACC,QAAQ,GAAKhD,IAAI,EAClC,CAAC,CAED,GAAM,CAAAiD,gBAAgB,CAAGJ,kBAAkB,CAACC,MAAM,CAAC,SAACC,IAAI,CAAK,CAC3D,GAAM,CAAAG,QAAQ,CAAGC,UAAU,CAACJ,IAAI,CAACK,IAAI,CAACC,OAAO,CAAC,OAAO,CAAE,EAAE,CAAC,CAAC,CAC3D,GAAM,CAAAD,IAAI,CAAGE,MAAM,CAACJ,QAAQ,CAAC,CAC7B,MAAO,CAAAE,IAAI,EAAIxC,MAAM,CAAC,CAAC,CAAC,EAAIwC,IAAI,EAAIxC,MAAM,CAAC,CAAC,CAAC,CAC/C,CAAC,CAAC,CAEF,GAAI,CAAA2C,cAAc,CAAAC,kBAAA,CAAOP,gBAAgB,CAAC,CAE1C,GAAIjC,MAAM,GAAK,gBAAgB,CAAE,CAC/BuC,cAAc,CAACE,IAAI,CAAC,SAACC,CAAC,CAAEC,CAAC,CAAK,CAC5B,GAAM,CAAAC,KAAK,CAAGT,UAAU,CAACO,CAAC,CAACN,IAAI,CAACC,OAAO,CAAC,OAAO,CAAE,EAAE,CAAC,CAAC,CACrD,GAAM,CAAAQ,KAAK,CAAGV,UAAU,CAACQ,CAAC,CAACP,IAAI,CAACC,OAAO,CAAC,OAAO,CAAE,EAAE,CAAC,CAAC,CACrD,MAAO,CAAAO,KAAK,CAAGC,KAAK,CACtB,CAAC,CAAC,CACJ,CAAC,IAAM,IAAI7C,MAAM,GAAK,iBAAiB,CAAE,CACvCuC,cAAc,CAACE,IAAI,CAAC,SAACC,CAAC,CAAEC,CAAC,CAAK,CAC5B,GAAM,CAAAC,KAAK,CAAGT,UAAU,CAACO,CAAC,CAACN,IAAI,CAACC,OAAO,CAAC,OAAO,CAAE,EAAE,CAAC,CAAC,CACrD,GAAM,CAAAQ,KAAK,CAAGV,UAAU,CAACQ,CAAC,CAACP,IAAI,CAACC,OAAO,CAAC,OAAO,CAAE,EAAE,CAAC,CAAC,CACrD,MAAO,CAAAQ,KAAK,CAAGD,KAAK,CACtB,CAAC,CAAC,CACJ,CAAC,IAAM,IAAI5C,MAAM,GAAK,OAAO,CAAE,CAC7BuC,cAAc,CAACE,IAAI,CAAC,SAACC,CAAC,CAAEC,CAAC,CAAK,CAC5B,GAAID,CAAC,CAACI,QAAQ,GAAK,EAAE,EAAIH,CAAC,CAACG,QAAQ,GAAK,EAAE,CAAE,CAC1C,MAAO,EAAC,CACV,CAAC,IAAM,IAAIJ,CAAC,CAACI,QAAQ,GAAK,EAAE,EAAIH,CAAC,CAACG,QAAQ,GAAK,EAAE,CAAE,CACjD,MAAO,CAAC,CAAC,CACX,CACF,CAAC,CAAC,CACJ,CAEArD,kBAAkB,CAAC8C,cAAc,CAAC,CACpC,CAAC,CAAE,CAACnD,QAAQ,CAAEJ,IAAI,CAAEY,MAAM,CAAEI,MAAM,CAAC,CAAC,CAEpC,GAAM,CAAA+C,UAAU,CAAG9E,WAAW,CAAC,SAAC+E,QAAQ,CAAK,CAC3C/C,SAAS,CAAC+C,QAAQ,CAAC,CACrB,CAAC,CAAE,EAAE,CAAC,CACN,GAAM,CAAAC,QAAQ,CAAG,QAAX,CAAAA,QAAQA,CAAA,CAAS,CACrB5C,aAAa,CAAC,CAACD,UAAU,CAAC,CAC5B,CAAC,CAED,mBACEzB,KAAA,CAAAE,SAAA,EAAAqE,QAAA,EACG9C,UAAU,eAAI3B,IAAA,QAAK0E,SAAS,CAAC,SAAS,CAACC,OAAO,CAAEH,QAAS,CAAM,CAAC,cACjEtE,KAAA,QAAKwE,SAAS,CAAC,eAAe,CAAAD,QAAA,eAC5BzE,IAAA,CAACN,MAAM,GAAE,CAAC,cACVQ,KAAA,QAAKwE,SAAS,CAAC,wBAAwB,CAAAD,QAAA,eACrCvE,KAAA,QAAKwE,SAAS,CAAE/C,UAAU,CAAG,cAAc,CAAG,gBAAiB,CAAA8C,QAAA,eAC7DvE,KAAA,QAAKwE,SAAS,CAAC,mBAAmB,CAAAD,QAAA,eAChCzE,IAAA,OAAAyE,QAAA,CAAKlE,IAAI,CAAK,CAAC,cACfP,IAAA,WACE0E,SAAS,CACP/C,UAAU,CACN,uBAAuB,CACvB,8BACL,CACDgD,OAAO,CAAEH,QAAS,CAAAC,QAAA,CACnB,GAED,CAAQ,CAAC,EACN,CAAC,cAENzE,IAAA,CAACL,KAAK,EAACwB,MAAM,CAAEA,MAAO,CAACC,SAAS,CAAEA,SAAU,CAAE,CAAC,cAC/CpB,IAAA,CAACF,IAAI,EAACwE,UAAU,CAAEA,UAAW,CAAE,CAAC,EAC7B,CAAC,cACNpE,KAAA,QAAKwE,SAAS,CAAC,mBAAmB,CAAAD,QAAA,eAChCzE,IAAA,QAAK0E,SAAS,CAAC,mBAAmB,CAAAD,QAAA,cAChCzE,IAAA,WAAQ0E,SAAS,CAAC,uBAAuB,CAACC,OAAO,CAAEH,QAAS,CAAAC,QAAA,CAAC,gFAE7D,CAAQ,CAAC,CACN,CAAC,cACNzE,IAAA,OAAI0E,SAAS,CAAC,UAAU,CAAAD,QAAA,CACrB1D,eAAe,CAAC6D,GAAG,CAAC,SAACC,OAAO,qBAC3B7E,IAAA,CAACH,WAAW,EAAkBgF,OAAO,CAAEA,OAAQ,EAA7BA,OAAO,CAACC,EAAuB,CAAC,EACnD,CAAC,CACA,CAAC,EACF,CAAC,EACH,CAAC,cACN9E,IAAA,CAACJ,MAAM,GAAE,CAAC,EACP,CAAC,EACN,CAAC,CAEP,CAEA,cAAe,CAAAS,IAAI"},"metadata":{},"sourceType":"module","externalDependencies":[]}