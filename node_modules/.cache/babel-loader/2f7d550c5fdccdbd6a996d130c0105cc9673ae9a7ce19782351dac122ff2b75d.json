{"ast":null,"code":"import _objectSpread from\"G:/internetM/my-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState}from\"react\";import\"../style/auth.css\";import{Formik,Form,Field,ErrorMessage}from\"formik\";import*as Yup from\"yup\";import remove from\"../../MainLanding/image/icone/remove.png\";import{Link}from\"react-router-dom\";import axios from\"axios\";import{useContext}from\"react\";import{CustomContext}from\"../../utils/Context\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var SigninSchema=Yup.object().shape({email:Yup.string().email(\"Invalid email\").required(\"Поле должно быть заполнено\"),password:Yup.string().min(6,\"Короткий пароль!\").max(50,\"Много символов!\").required(\"Поле должно быть заполнено\")});function Auth(_ref){var AuthActive=_ref.AuthActive,handleClick=_ref.handleClick,RegActive=_ref.RegActive;var _useContext=useContext(CustomContext),user=_useContext.user,setUser=_useContext.setUser;var _useState=useState(false),error=_useState.error,setError=_useState.setError;function loginUser(values){var User=values;console.log(values);axios.post(\"http://localhost:3330/signin\",User).then(function(_ref2){var data=_ref2.data;setUser(_objectSpread({token:data.accessToken},data.user));localStorage.setItem(\"user\",JSON.stringify(_objectSpread({token:data.accessToken},data.user)));handleClick();}).catch(function(err){return console.log(err);});}return/*#__PURE__*/_jsx(\"div\",{className:AuthActive?\"authoriz-active\":\"authoriz\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"authoriz__form\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"authoriz__form-prew\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Log in\"}),/*#__PURE__*/_jsx(\"img\",{onClick:handleClick,src:remove,alt:\"404\"})]}),/*#__PURE__*/_jsx(Formik,{initialValues:{email:\"\",password:\"\"},validationSchema:SigninSchema,onSubmit:function onSubmit(values){loginUser(values);},children:function children(_ref3){var errors=_ref3.errors,touched=_ref3.touched;return/*#__PURE__*/_jsx(Form,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"authoriz__form-content\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"authoriz__email-label\",htmlFor:\"email\",children:\"Email\"}),/*#__PURE__*/_jsx(Field,{className:\"authoriz__input email\",name:\"email\",type:\"email\"}),errors.email&&touched.email?/*#__PURE__*/_jsx(\"div\",{className:\"authoriz__email-msg\",children:errors.email}):null,/*#__PURE__*/_jsx(\"label\",{className:\"authoriz__password-label\",htmlFor:\"email\",children:\"Password\"}),/*#__PURE__*/_jsx(Field,{className:\"authoriz__input password\",name:\"password\"}),errors.password&&touched.password?/*#__PURE__*/_jsxs(\"div\",{className:\"authoriz__password-msg\",children:[errors.password,error?\"\":\"asd\"]}):null,/*#__PURE__*/_jsx(\"button\",{className:\"authoriz__button\",type:\"submit\",children:\"\\u0412\\u043E\\u0439\\u0442\\u0438\"})]})});}}),/*#__PURE__*/_jsx(\"span\",{className:\"authoriz__register-btn\",onClick:RegActive,children:\"\\u0417\\u0430\\u0440\\u0435\\u0433\\u0435\\u0441\\u0442\\u0440\\u0438\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C\\u0441\\u044F\"})]})});}export default Auth;","map":{"version":3,"names":["React","useState","Formik","Form","Field","ErrorMessage","Yup","remove","Link","axios","useContext","CustomContext","jsx","_jsx","jsxs","_jsxs","SigninSchema","object","shape","email","string","required","password","min","max","Auth","_ref","AuthActive","handleClick","RegActive","_useContext","user","setUser","_useState","error","setError","loginUser","values","User","console","log","post","then","_ref2","data","_objectSpread","token","accessToken","localStorage","setItem","JSON","stringify","catch","err","className","children","onClick","src","alt","initialValues","validationSchema","onSubmit","_ref3","errors","touched","htmlFor","name","type"],"sources":["G:/internetM/my-app/src/Authoriz/page/Auth.js"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport \"../style/auth.css\";\r\nimport { Formik, Form, Field, ErrorMessage } from \"formik\";\r\nimport * as Yup from \"yup\";\r\nimport remove from \"../../MainLanding/image/icone/remove.png\";\r\nimport { Link } from \"react-router-dom\";\r\nimport axios from \"axios\";\r\nimport { useContext } from \"react\";\r\nimport { CustomContext } from \"../../utils/Context\";\r\n\r\nconst SigninSchema = Yup.object().shape({\r\n  email: Yup.string()\r\n    .email(\"Invalid email\")\r\n    .required(\"Поле должно быть заполнено\"),\r\n  password: Yup.string()\r\n    .min(6, \"Короткий пароль!\")\r\n    .max(50, \"Много символов!\")\r\n    .required(\"Поле должно быть заполнено\"),\r\n});\r\n\r\nfunction Auth({ AuthActive, handleClick, RegActive }) {\r\n  const { user, setUser } = useContext(CustomContext);\r\n  const { error, setError } = useState(false);\r\n\r\n  function loginUser(values) {\r\n    let User = values;\r\n    console.log(values);\r\n\r\n    axios\r\n      .post(\"http://localhost:3330/signin\", User)\r\n      .then(({ data }) => {\r\n        setUser({\r\n          token: data.accessToken,\r\n          ...data.user,\r\n        });\r\n\r\n        localStorage.setItem(\r\n          \"user\",\r\n          JSON.stringify({\r\n            token: data.accessToken,\r\n            ...data.user,\r\n          })\r\n        );\r\n        handleClick();\r\n      })\r\n      .catch((err) => console.log(err));\r\n  }\r\n\r\n  return (\r\n    <div className={AuthActive ? \"authoriz-active\" : \"authoriz\"}>\r\n      <div className=\"authoriz__form\">\r\n        <div className=\"authoriz__form-prew\">\r\n          <h1>Log in</h1>\r\n          <img onClick={handleClick} src={remove} alt=\"404\" />\r\n        </div>\r\n        <Formik\r\n          initialValues={{ email: \"\", password: \"\" }}\r\n          validationSchema={SigninSchema}\r\n          onSubmit={(values) => {\r\n            loginUser(values);\r\n          }}\r\n        >\r\n          {({ errors, touched }) => (\r\n            <Form>\r\n              <div className=\"authoriz__form-content\">\r\n                <label className=\"authoriz__email-label\" htmlFor=\"email\">\r\n                  Email\r\n                </label>\r\n                <Field\r\n                  className=\"authoriz__input email\"\r\n                  name=\"email\"\r\n                  type=\"email\"\r\n                />\r\n                {errors.email && touched.email ? (\r\n                  <div className=\"authoriz__email-msg\">{errors.email}</div>\r\n                ) : null}\r\n                <label className=\"authoriz__password-label\" htmlFor=\"email\">\r\n                  Password\r\n                </label>\r\n                <Field className=\"authoriz__input password\" name=\"password\" />\r\n                {errors.password && touched.password ? (\r\n                  <div className=\"authoriz__password-msg\">\r\n                    {errors.password}\r\n                    {error ? \"\" : \"asd\"}\r\n                  </div>\r\n                ) : null}\r\n                <button className=\"authoriz__button\" type=\"submit\">\r\n                  Войти\r\n                </button>\r\n              </div>\r\n            </Form>\r\n          )}\r\n        </Formik>\r\n        <span className=\"authoriz__register-btn\" onClick={RegActive}>\r\n          Зарегестрироваться\r\n        </span>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Auth;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}